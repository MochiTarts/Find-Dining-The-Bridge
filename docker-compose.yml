version: "3.8"

services:
  server:
    container_name: server-test
    build:
      context: ./backend
      args: 
        - DEBUG=True
        - SECRET_KEY=${SECRET_KEY}
        - DB_ENGINE=${DB_ENGINE}
        - DB_NAME=${DB_NAME}
        - DB_HOST=${DB_HOST}
        - DB_USER=${DB_USER}
        - DB_PASS=${DB_PASS}
        - GMAIL_API_CLIENT_ID=${GMAIL_API_CLIENT_ID}
        - GMAIL_API_CLIENT_SECRET=${GMAIL_API_CLIENT_SECRET}
        - GMAIL_API_REFRESH_TOKEN=${GMAIL_API_REFRESH_TOKEN}
      dockerfile: Dockerfile
    image: finddiningutsc/revamp:latest-server-test
    ports: 
      - "8001:8001"
  client:
    container_name: client-test
    build:
      context: ./client-server
      dockerfile: Dockerfile
    image: finddiningutsc/revamp:latest-client-test
    ports:
      - "8443:8443"
      - "8080:8080"
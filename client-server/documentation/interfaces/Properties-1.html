<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>client-server documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">client-server documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>Properties</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/components/carousel/touches.ts</code>
        </p>



        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#element">element</a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#listeners">listeners</a>
                                </li>
                                <li>
                                            <span class="modifier">Optional</span>
                                        <a href="#resize">resize</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="element"></a>
                                        <span class="name"><b>element</b><a href="#element"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>element:     <code>HTMLElement</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>HTMLElement</code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="listeners"></a>
                                        <span class="name"><b>listeners</b><a href="#listeners"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>listeners:     <code>&quot;auto&quot; | &quot;mouse and touch&quot;</code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code>&quot;auto&quot; | &quot;mouse and touch&quot;</code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="resize"></a>
                                        <span class="name"><b>resize</b><a href="#resize"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>resize:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="col-md-4">
                                            <i>Optional</i>
                                        </td>
                                    </tr>




                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">export interface Properties {
  element: HTMLElement;
  listeners?: &#x27;auto&#x27; | &#x27;mouse and touch&#x27;;
  resize?: boolean;
}

export type EventType &#x3D;
  | undefined
  | &#x27;touchend&#x27;
  | &#x27;pan&#x27;
  | &#x27;pinch&#x27;
  | &#x27;horizontal-swipe&#x27;
  | &#x27;vertical-swipe&#x27;
  | &#x27;tap&#x27;
  | &#x27;longtap&#x27;;
export type TouchHandler &#x3D;
  | &#x27;handleTouchstart&#x27;
  | &#x27;handleTouchmove&#x27;
  | &#x27;handleTouchend&#x27;;
export type MouseHandler &#x3D;
  | &#x27;handleMousedown&#x27;
  | &#x27;handleMousemove&#x27;
  | &#x27;handleMouseup&#x27;;

export class Touches {
  properties: Properties;
  element: HTMLElement;
  elementPosition: ClientRect;
  eventType: EventType &#x3D; undefined;
  handlers: any &#x3D; {};
  startX &#x3D; 0;
  startY &#x3D; 0;
  lastTap &#x3D; 0;
  doubleTapTimeout: any;
  doubleTapMinTimeout &#x3D; 300;
  tapMinTimeout &#x3D; 200;
  touchstartTime &#x3D; 0;
  i: number &#x3D; 0;
  isMousedown &#x3D; false;

  touchListeners: any &#x3D; {
    touchstart: &#x27;handleTouchstart&#x27;,
    touchmove: &#x27;handleTouchmove&#x27;,
    touchend: &#x27;handleTouchend&#x27;,
  };
  mouseListeners: any &#x3D; {
    mousedown: &#x27;handleMousedown&#x27;,
    mousemove: &#x27;handleMousemove&#x27;,
    mouseup: &#x27;handleMouseup&#x27;,
    wheel: &#x27;handleWheel&#x27;,
  };
  otherListeners: any &#x3D; {
    resize: &#x27;handleResize&#x27;,
  };

  constructor(properties: Properties) {
    this.properties &#x3D; properties;
    this.element &#x3D; this.properties.element;
    this.elementPosition &#x3D; this.getElementPosition();

    this.toggleEventListeners(&#x27;addEventListener&#x27;);
  }

  destroy() {
    this.toggleEventListeners(&#x27;removeEventListener&#x27;);
  }

  toggleEventListeners(action: &#x27;addEventListener&#x27; | &#x27;removeEventListener&#x27;) {
    let listeners;

    if (this.properties.listeners &#x3D;&#x3D;&#x3D; &#x27;mouse and touch&#x27;) {
      listeners &#x3D; Object.assign(this.touchListeners, this.mouseListeners);
    } else {
      listeners &#x3D; this.detectTouchScreen()
        ? this.touchListeners
        : this.mouseListeners;
    }

    if (this.properties.resize) {
      listeners &#x3D; Object.assign(listeners, this.otherListeners);
    }

    for (var listener in listeners) {
      const handler: MouseHandler &#x3D; listeners[listener];

      // Window
      if (listener &#x3D;&#x3D;&#x3D; &#x27;resize&#x27;) {
        if (action &#x3D;&#x3D;&#x3D; &#x27;addEventListener&#x27;) {
          window.addEventListener(listener, this[handler], false);
        }
        if (action &#x3D;&#x3D;&#x3D; &#x27;removeEventListener&#x27;) {
          window.removeEventListener(listener, this[handler], false);
        }
        // Document
      } else if (listener &#x3D;&#x3D;&#x3D; &#x27;mouseup&#x27; || listener &#x3D;&#x3D;&#x3D; &#x27;mousemove&#x27;) {
        if (action &#x3D;&#x3D;&#x3D; &#x27;addEventListener&#x27;) {
          document.addEventListener(listener, this[handler], false);
        }
        if (action &#x3D;&#x3D;&#x3D; &#x27;removeEventListener&#x27;) {
          document.removeEventListener(listener, this[handler], false);
        }
        // Element
      } else {
        if (action &#x3D;&#x3D;&#x3D; &#x27;addEventListener&#x27;) {
          this.element.addEventListener(listener, this[handler], false);
        }
        if (action &#x3D;&#x3D;&#x3D; &#x27;removeEventListener&#x27;) {
          this.element.removeEventListener(listener, this[handler], false);
        }
      }
    }
  }

  /*
   * Listeners
   */

  /* Touchstart */

  handleTouchstart &#x3D; (event: any) &#x3D;&gt; {
    this.elementPosition &#x3D; this.getElementPosition();
    this.touchstartTime &#x3D; new Date().getTime();

    if (this.eventType &#x3D;&#x3D;&#x3D; undefined) {
      this.getTouchstartPosition(event);
    }

    this.runHandler(&#x27;touchstart&#x27;, event);
  };

  /* Touchmove */

  handleTouchmove &#x3D; (event: any) &#x3D;&gt; {
    const touches &#x3D; event.touches;

    // Pan
    if (this.detectPan(touches)) {
      this.runHandler(&#x27;pan&#x27;, event);
    }

    // Pinch
    if (this.detectPinch(event)) {
      this.runHandler(&#x27;pinch&#x27;, event);
    }

    // Linear swipe
    switch (this.detectLinearSwipe(event)) {
      case &#x27;horizontal-swipe&#x27;:
        event.swipeType &#x3D; &#x27;horizontal-swipe&#x27;;
        this.runHandler(&#x27;horizontal-swipe&#x27;, event);
        break;
      case &#x27;vertical-swipe&#x27;:
        event.swipeType &#x3D; &#x27;vertical-swipe&#x27;;
        this.runHandler(&#x27;vertical-swipe&#x27;, event);
        break;
    }

    // Linear swipe
    if (
      this.detectLinearSwipe(event) ||
      this.eventType &#x3D;&#x3D;&#x3D; &#x27;horizontal-swipe&#x27; ||
      this.eventType &#x3D;&#x3D;&#x3D; &#x27;vertical-swipe&#x27;
    ) {
      this.handleLinearSwipe(event);
    }
  };

  handleLinearSwipe(event: any) {
    //event.preventDefault();

    this.i++;

    if (this.i &gt; 3) {
      this.eventType &#x3D; this.getLinearSwipeType(event);
    }

    if (this.eventType &#x3D;&#x3D;&#x3D; &#x27;horizontal-swipe&#x27;) {
      this.runHandler(&#x27;horizontal-swipe&#x27;, event);
    }

    if (this.eventType &#x3D;&#x3D;&#x3D; &#x27;vertical-swipe&#x27;) {
      this.runHandler(&#x27;vertical-swipe&#x27;, event);
    }
  }

  /* Touchend */

  handleTouchend &#x3D; (event: any) &#x3D;&gt; {
    const touches &#x3D; event.touches;

    // Double Tap
    if (this.detectDoubleTap()) {
      this.runHandler(&#x27;double-tap&#x27;, event);
    }

    // Tap
    this.detectTap();

    this.runHandler(&#x27;touchend&#x27;, event);
    this.eventType &#x3D; &#x27;touchend&#x27;;

    if (touches &amp;&amp; touches.length &#x3D;&#x3D;&#x3D; 0) {
      this.eventType &#x3D; undefined;
      this.i &#x3D; 0;
    }
  };

  /* Mousedown */

  handleMousedown &#x3D; (event: any) &#x3D;&gt; {
    this.isMousedown &#x3D; true;
    this.elementPosition &#x3D; this.getElementPosition();
    this.touchstartTime &#x3D; new Date().getTime();

    if (this.eventType &#x3D;&#x3D;&#x3D; undefined) {
      this.getMousedownPosition(event);
    }

    this.runHandler(&#x27;mousedown&#x27;, event);
  };

  /* Mousemove */

  handleMousemove &#x3D; (event: any) &#x3D;&gt; {
    //event.preventDefault();

    if (!this.isMousedown) {
      return;
    }

    // Pan
    this.runHandler(&#x27;pan&#x27;, event);

    // Linear swipe
    switch (this.detectLinearSwipe(event)) {
      case &#x27;horizontal-swipe&#x27;:
        event.swipeType &#x3D; &#x27;horizontal-swipe&#x27;;
        this.runHandler(&#x27;horizontal-swipe&#x27;, event);
        break;
      case &#x27;vertical-swipe&#x27;:
        event.swipeType &#x3D; &#x27;vertical-swipe&#x27;;
        this.runHandler(&#x27;vertical-swipe&#x27;, event);
        break;
    }

    // Linear swipe
    if (
      this.detectLinearSwipe(event) ||
      this.eventType &#x3D;&#x3D;&#x3D; &#x27;horizontal-swipe&#x27; ||
      this.eventType &#x3D;&#x3D;&#x3D; &#x27;vertical-swipe&#x27;
    ) {
      this.handleLinearSwipe(event);
    }
  };

  /* Mouseup */

  handleMouseup &#x3D; (event: any) &#x3D;&gt; {
    // Tap
    this.detectTap();

    this.isMousedown &#x3D; false;
    this.runHandler(&#x27;mouseup&#x27;, event);
    this.eventType &#x3D; undefined;
    this.i &#x3D; 0;
  };

  /* Wheel */

  handleWheel &#x3D; (event: any) &#x3D;&gt; {
    this.runHandler(&#x27;wheel&#x27;, event);
  };

  /* Resize */

  handleResize &#x3D; (event: any) &#x3D;&gt; {
    this.runHandler(&#x27;resize&#x27;, event);
  };

  runHandler(eventName: any, response: any) {
    if (this.handlers[eventName]) {
      this.handlers[eventName](response);
    }
  }

  /*
   * Detection
   */

  detectPan(touches: any) {
    return (
      (touches.length &#x3D;&#x3D;&#x3D; 1 &amp;&amp; !this.eventType) || this.eventType &#x3D;&#x3D;&#x3D; &#x27;pan&#x27;
    );
  }

  detectDoubleTap() {
    if (this.eventType !&#x3D; undefined) {
      return;
    }

    const currentTime &#x3D; new Date().getTime();
    const tapLength &#x3D; currentTime - this.lastTap;

    clearTimeout(this.doubleTapTimeout);

    if (tapLength &lt; this.doubleTapMinTimeout &amp;&amp; tapLength &gt; 0) {
      return true;
    } else {
      this.doubleTapTimeout &#x3D; setTimeout(() &#x3D;&gt; {
        clearTimeout(this.doubleTapTimeout);
      }, this.doubleTapMinTimeout);
    }
    this.lastTap &#x3D; currentTime;
  }

  detectTap(): void {
    if (this.eventType !&#x3D; undefined) {
      return;
    }

    const currentTime &#x3D; new Date().getTime();
    const tapLength &#x3D; currentTime - this.touchstartTime;

    if (tapLength &gt; 0) {
      if (tapLength &lt; this.tapMinTimeout) {
        this.runHandler(&#x27;tap&#x27;, event);
      } else {
        this.runHandler(&#x27;longtap&#x27;, event);
      }
    }
  }

  detectPinch(event: any) {
    const touches &#x3D; event.touches;
    return (
      (touches.length &#x3D;&#x3D;&#x3D; 2 &amp;&amp; this.eventType &#x3D;&#x3D;&#x3D; undefined) ||
      this.eventType &#x3D;&#x3D;&#x3D; &#x27;pinch&#x27;
    );
  }

  detectLinearSwipe(event: any) {
    const touches &#x3D; event.touches;

    if (touches) {
      if (
        (touches.length &#x3D;&#x3D;&#x3D; 1 &amp;&amp; !this.eventType) ||
        this.eventType &#x3D;&#x3D;&#x3D; &#x27;horizontal-swipe&#x27; ||
        this.eventType &#x3D;&#x3D;&#x3D; &#x27;vertical-swipe&#x27;
      ) {
        return this.getLinearSwipeType(event);
      }
    } else {
      if (
        !this.eventType ||
        this.eventType &#x3D;&#x3D;&#x3D; &#x27;horizontal-swipe&#x27; ||
        this.eventType &#x3D;&#x3D;&#x3D; &#x27;vertical-swipe&#x27;
      ) {
        return this.getLinearSwipeType(event);
      }
    }
  }

  getLinearSwipeType(event: any) {
    if (
      this.eventType !&#x3D;&#x3D; &#x27;horizontal-swipe&#x27; &amp;&amp;
      this.eventType !&#x3D;&#x3D; &#x27;vertical-swipe&#x27;
    ) {
      const movementX &#x3D; Math.abs(this.moveLeft(0, event) - this.startX);
      const movementY &#x3D; Math.abs(this.moveTop(0, event) - this.startY);

      if (movementY * 3 &gt; movementX) {
        return &#x27;vertical-swipe&#x27;;
      } else {
        return &#x27;horizontal-swipe&#x27;;
      }
    } else {
      return this.eventType;
    }
  }

  getElementPosition() {
    return this.element.getBoundingClientRect();
  }

  getTouchstartPosition(event: any) {
    this.startX &#x3D; event.touches[0].clientX - this.elementPosition.left;
    this.startY &#x3D; event.touches[0].clientY - this.elementPosition.top;
  }

  getMousedownPosition(event: any) {
    this.startX &#x3D; event.clientX - this.elementPosition.left;
    this.startY &#x3D; event.clientY - this.elementPosition.top;
  }

  moveLeft(index: any, event: any) {
    const touches &#x3D; event.touches;

    if (touches) {
      return touches[index].clientX - this.elementPosition.left;
    } else {
      return event.clientX - this.elementPosition.left;
    }
  }

  moveTop(index: any, event: any) {
    const touches &#x3D; event.touches;

    if (touches) {
      return touches[index].clientY - this.elementPosition.top;
    } else {
      return event.clientY - this.elementPosition.top;
    }
  }

  detectTouchScreen() {
    var prefixes &#x3D; &#x27; -webkit- -moz- -o- -ms- &#x27;.split(&#x27; &#x27;);
    var mq &#x3D; function (query: any) {
      return window.matchMedia(query).matches;
    };

    if (&#x27;ontouchstart&#x27; in window) {
      return true;
    }

    // include the &#x27;heartz&#x27; as a way to have a non matching MQ to help terminate the join
    // https://git.io/vznFH
    var query &#x3D; [&#x27;(&#x27;, prefixes.join(&#x27;touch-enabled),(&#x27;), &#x27;heartz&#x27;, &#x27;)&#x27;].join(
      &#x27;&#x27;
    );
    return mq(query);
  }

  /* Public properties and methods */
  on(event: EventType, handler: Function) {
    if (event) {
      this.handlers[event] &#x3D; handler;
    }
  }
}
</code></pre>
    </div>
</div>


                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'Properties-1.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
